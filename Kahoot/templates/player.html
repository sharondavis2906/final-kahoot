<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Player</title>
    <link rel="stylesheet" type="text/css" media="screen" href="{{ url_for('static', filename='css/stylesheet.css') }}">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, height=device-height">
</head>

<body>

<meta name="viewport" content="width=device-width, initial-scale=1.0, height=device-height">

<!-- 
No scroll bars
-->
<style>
    html, body {
        margin:0; padding:0; overflow: hidden;
		height: 100%;
		width: 100%;
		display: flex;
        align-items: center;
        justify-content: center;
    }
</style>



<svg width="100%" height="100%">


<script>
//--onload, onresize----
function sizeSVG()
{
	var mySVG=document.getElementsByTagName("svg")[0]

  	var svgW=window.innerWidth
	var svgH=window.innerHeight

	
    mySVG.setAttribute("width",svgW)
    mySVG.setAttribute("height",svgH)
		
	
}

document.addEventListener("onload",sizeSVG(),false)
window.onresize=sizeSVG



</script>

 
<svg preserveAspectRatio="xMidYMid meet"></svg>

<svg>

<g>
<rect id="mainrect" width="100%" height="100%" fill="pink" rx="0" ry="0"/>
<text id="kahoot" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="80px"; font-style="italic"; font-family="times new roman"; font-weight="bold"; fill="yellow">Kahoot!</text>
<text id="error" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="40px"; font-style="italic"; font-family="times new roman"; font-weight="bold"; fill="red"></text>
<text id="wait" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="40px"; font-style="normal"; font-family="times new roman"; font-weight="bold"; fill="black"></text>  
</g>



<g>
<rect id="toprow" width="100%" x="0%" fill="white" rx="0px" ry="0px"/>
<text id="gametext" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="35px"; font-style="normal"; font-family="times new roman"; font-weight="bold"; fill="black"></text>
<text id="pintext" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="35px"; font-style="normal"; font-family="times new roman"; font-weight="bold"; fill="black"></text>
<text id="questiontext" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="35px"; font-style="normal"; font-family="times new roman"; font-weight="bold"; fill="black"></text>
</g>

<g>
<rect id="bottomrow" width="100%" x="0%" fill="white" rx="0px" ry="0px"/>
<text id="playertext" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="35px"; font-style="normal"; font-family="times new roman"; font-weight="bold"; fill="black"></text>
<text id="scoretext" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="35px"; font-style="normal"; font-family="times new roman"; font-weight="bold"; fill="black"></text>
</g>



<!-- 
Count-down screen before question starts
-->

<g>
 <rect id="aprequestr" width="100%" x="0%" fill="blue" rx="0px" ry="0px"/>
 <text id="aprequest" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="40px"; font-style="normal"; font-family="times new roman"; font-weight="bold"; fill="white"></text> 
</g>

<g>
 <circle id="atimepc" cx="50%" cy="45%" r="3%" fill="purple"/>
 <text id="atimep" x="50%" y="45%" dominant-baseline="middle" alignment-baseline="central" text-anchor="middle"; font-size="40px"; font-style="normal"; font-family="times new roman"; font-weight="bold"; fill="white"></text> 
</g>



</svg>



<!-- 
Enter Game PIN page
-->

<div style="position:fixed">

    <input type="text" id="messagepin" placeholder="Game PIN" style="font-size:25px; text-align: center;position:fixed">

<div>


<div style="position:fixed">

    <button type=“submit” id="gamepin" class="btn-hover color-9" style="font-size:25px;position:fixed">Enter</button>	

<div>



<!-- 
Enter Nickname page
-->

<div style="position:fixed">

    <input type="text" id="messagenn" placeholder="Nickname" style="font-size:25px; text-align: center;position:fixed">

<div>


<div style="position:fixed">

    <button type=“submit” id="nickname" class="btn-hover color-8" style="font-size:25px;position:fixed">OK, go!</button>	

<div>



<!-- 
Answer page
-->



<div style="position:fixed">

    <button type=“submit” id="answer-red" class="btnb-hover color-1" style="font-size:30px;position:fixed"></button>	

<div>


<div style="position:fixed">

    <button type=“submit” id="answer-blue" class="btnb-hover color-2" style="font-size:30px;position:fixed"></button>	

<div>


<div style="position:fixed">

    <button type=“submit” id="answer-orange" class="btnb-hover color-3" style="font-size:30px;position:fixed"></button>	

<div>


<div style="position:fixed">

    <button type=“submit” id="answer-green" class="btnb-hover color-4" style="font-size:30px;position:fixed"></button>	

<div>







<script type="text/javascript">


	var kah = document.getElementById("kahoot");
    kah.setAttribute('x',window.innerWidth/2);
    kah.setAttribute('y',window.innerHeight*(6/100));
	


    var mpin_width = window.innerWidth/6;
    var mpin_width_px = mpin_width + "px";

    var gpin_width = window.innerWidth/6;
    var gpin_width_px = gpin_width + "px";


    var mpin_height = window.innerHeight/20;
    var mpin_height_px = mpin_height + "px"; 

    var gpin_height = window.innerHeight/16;
    var gpin_height_px = gpin_height + "px"; 
	
	
	var mpin_top = window.innerHeight/2;
	var mpin_left = window.innerWidth/2 - mpin_width/2;	
	var mpin_top_px = mpin_top + "px";
	var mpin_left_px = mpin_left + "px";
	
	var gpin_top = window.innerHeight/2 + mpin_height*3/2;
	var gpin_left = window.innerWidth/2 - gpin_width/2;	
	var gpin_top_px = gpin_top + "px";
	var gpin_left_px = gpin_left + "px";	
	
	
	
	
	document.getElementById("messagepin").style.width = mpin_width_px;
	document.getElementById("messagepin").style.height = mpin_height_px;	
	document.getElementById("messagepin").style.top = mpin_top_px;
	document.getElementById("messagepin").style.left = mpin_left_px;
	
	document.getElementById("gamepin").style.width = gpin_width_px;
	document.getElementById("gamepin").style.height = gpin_height_px;	
	document.getElementById("gamepin").style.top = gpin_top_px;
	document.getElementById("gamepin").style.left = gpin_left_px;	
	

	document.getElementById("messagenn").style.width = mpin_width_px;
	document.getElementById("messagenn").style.height = mpin_height_px;	
	document.getElementById("messagenn").style.top = mpin_top_px;
	document.getElementById("messagenn").style.left = mpin_left_px;
	
	document.getElementById("nickname").style.width = gpin_width_px;
	document.getElementById("nickname").style.height = gpin_height_px;	
	document.getElementById("nickname").style.top = gpin_top_px;
	document.getElementById("nickname").style.left = gpin_left_px;	


	console.log(444);
	console.log(mpin_height);

	
	// Disable "Nickname" during "PIN" page
	document.getElementById("messagenn").disabled = true;
    document.getElementById("nickname").disabled = true;
	

    document.getElementById("messagenn").style.display = "none"; // Hide
    document.getElementById("nickname").style.display = "none";
		
	
	var err = document.getElementById("error");
    err.setAttribute('x',window.innerWidth/2);
    err.setAttribute('y',window.innerHeight*(25/100));
	
	
var wt = document.getElementById("wait");
wt.setAttribute('x',window.innerWidth/2);
wt.setAttribute('y',window.innerHeight*((45)/100));	
	
// ==============================================================================================
// Answer


var toprow = 20;

var tr = document.getElementById("toprow");
tr.setAttribute('x',0);
tr.setAttribute('y',window.innerHeight*(toprow/100));
tr.setAttribute('height',window.innerHeight*(7/100));

var gt = document.getElementById("gametext");
gt.setAttribute('x',window.innerWidth/5);
gt.setAttribute('y',window.innerHeight*((toprow+3.5)/100));


var pt = document.getElementById("pintext");
pt.setAttribute('x',window.innerWidth/2);
pt.setAttribute('y',window.innerHeight*((toprow+3.5)/100));


var qt = document.getElementById("questiontext");
qt.setAttribute('x',window.innerWidth/2+window.innerWidth/3);
qt.setAttribute('y',window.innerHeight*((toprow+3.5)/100));


var botrow = 93;

var br = document.getElementById("bottomrow");
br.setAttribute('x',0);
br.setAttribute('y',window.innerHeight*(botrow/100));
br.setAttribute('height',window.innerHeight*(7/100));

var yt = document.getElementById("playertext");
yt.setAttribute('x',window.innerWidth/5);
yt.setAttribute('y',window.innerHeight*((botrow+3.5)/100));


var st = document.getElementById("scoretext");
st.setAttribute('x',window.innerWidth/2+window.innerWidth/3);
st.setAttribute('y',window.innerHeight*((botrow+3.5)/100));



var button_width = window.innerWidth/2 - 30;
var button_width_px = button_width + "px";

var button_height = window.innerHeight*(30/100);
var button_height_px = button_height + "px"; 


var button_red_y = window.innerHeight*(3/4);
var button_red_y_px = button_red_y + "px";

document.getElementById("answer-red").style.width = button_width_px;
document.getElementById("answer-red").style.height = button_height_px;

document.getElementById("answer-blue").style.width = button_width_px;
document.getElementById("answer-blue").style.height = button_height_px;

document.getElementById("answer-orange").style.width = button_width_px;
document.getElementById("answer-orange").style.height = button_height_px;

document.getElementById("answer-green").style.width = button_width_px;
document.getElementById("answer-green").style.height = button_height_px;






	var but1_top = window.innerHeight*(30/100);
	var but1_left = window.innerWidth*(2/100);	
	var but1_top_px = but1_top + "px";
	var but1_left_px = but1_left + "px";
	
	var but2_top = but1_top;
	var but2_left = window.innerWidth - but1_left - button_width;	
	var but2_top_px = but2_top + "px";
	var but2_left_px = but2_left + "px";	
	
	var but3_top = but2_top + button_height + (4/100)*button_height;
	var but3_left = but1_left;	
	var but3_top_px = but3_top + "px";
	var but3_left_px = but3_left + "px";		
	
	var but4_top = but3_top;
	var but4_left = but2_left;	
	var but4_top_px = but4_top + "px";
	var but4_left_px = but4_left + "px";	

	var but5_top = window.innerHeight*(20/100);
	var but5_left = window.innerWidth*(2/100);	
	var but5_top_px = but5_top + "px";
	var but5_left_px = but5_left + "px";	
	
		
	document.getElementById("answer-red").style.top = but1_top_px;
	document.getElementById("answer-red").style.left = but1_left_px;

	document.getElementById("answer-blue").style.top = but2_top_px;
	document.getElementById("answer-blue").style.left = but2_left_px;
	
	document.getElementById("answer-orange").style.top = but3_top_px;
	document.getElementById("answer-orange").style.left = but3_left_px;

	document.getElementById("answer-green").style.top = but4_top_px;
	document.getElementById("answer-green").style.left = but4_left_px;	



// Displayed before the question starts
var pquer = document.getElementById("aprequestr");
pquer.setAttribute('x',0);
pquer.setAttribute('y',window.innerHeight*(25/100));
pquer.setAttribute('height',window.innerHeight*(70/100));

var pque = document.getElementById("aprequest");
pque.setAttribute('x',window.innerWidth/2);
pque.setAttribute('y',window.innerHeight*((35)/100));

//document.getElementById("aprequest").textContent = "Question " + question_num;



// When Player page is first displayed the Answer section is hidden

// TEMP


    document.getElementById("answer-red").style.display = "none";
    document.getElementById("answer-blue").style.display = "none";
    document.getElementById("answer-orange").style.display = "none";
    document.getElementById("answer-green").style.display = "none";
	
	document.getElementById("answer-red").disabled = true;
	document.getElementById("answer-blue").disabled = true;
	document.getElementById("answer-orange").disabled = true;
	document.getElementById("answer-green").disabled = true;	

	
	

// Countdown
    document.getElementById("aprequestr").style.display = "none";
    document.getElementById("aprequest").style.display = "none";
	document.getElementById("atimepc").style.display = "none";
    document.getElementById("atimep").style.display = "none";
	
	
	
    document.getElementById("toprow").style.display = "none";
    document.getElementById("gametext").style.display = "none";
    document.getElementById("pintext").style.display = "none"; 
    document.getElementById("questiontext").style.display = "none";
    document.getElementById("bottomrow").style.display = "none";
    document.getElementById("playertext").style.display = "none";
    document.getElementById("scoretext").style.display = "none";
       
	   

// ==============================================================================================

   var timeintervalp;

   function update_atimep () 
   {
     question_atimep = question_atimep -1;
     document.getElementById("atimep").textContent = question_atimep;
	 console.log("ATIMEP");	
     console.log(question_atimep);	
		 
	 if (question_atimep == 0)
	 {
	   clearInterval(timeintervalap);
	   //document.getElementById("question_timeoutp").click();
	 }
	 	 
   } // update_atimep
 




function update_player (mode,game,pin,player,score,numquestions,question_num)
{
  // 
  
  console.log(767);
  console.log(mode);
  
  if (mode == "nogame")
  {
     // Game hasn't been selected
     document.getElementById("error").textContent = "The game has not been selected yet. Patience!";

	 
  }
  else if (mode == "badpin")
  { 
     // Incorrect PIN was entered
     document.getElementById("error").textContent = "The PIN you entered is incorrect. Please enter the correct PIN";  
  }
  else if (mode == "pinok")
  {
    // PIN OK 
	
	console.log(999);

    document.getElementById("messagenn").disabled = false;
    document.getElementById("nickname").disabled = false;
    document.getElementById("messagepin").disabled = true;
    document.getElementById("gamepin").disabled = true;


    document.getElementById("messagenn").style.display = "block"; // Display
    document.getElementById("nickname").style.display = "block";
	document.getElementById("messagepin").style.display = "none"; // Hide
	document.getElementById("gamepin").style.display = "none";
    document.getElementById("error").textContent = "";

    document.getElementById("mainrect").style.fill = "lightgreen";

  }
    else if (mode == "tooManyPlayers")
  {
    // PIN OK but more than 5 players 
	document.getElementById("error").textContent = "Sorryyyyyyyy their are more than 5 players in the game. Try faster next time";  
	console.log(999);

  }
  
   else if (mode == "late2game")
  {
    // PIN OK but late to game
	
	console.log(999);
    document.getElementById("error").textContent = "The game had started! Be faster next time";  

  }
 else if (mode == "tryAgain")
  { 
     document.getElementById("error").textContent = "Try Entering a different game!"; 
	 document.getElementById("messagepin").disabled = false;
     document.getElementById("gamepin").disabled = false;
	 document.getElementById("messagepin").style.display = "block"; 
	 document.getElementById("gamepin").style.display = "block";

	 
	 
  }

  else if (mode == "badname")
  {
    document.getElementById("error").textContent = "Please enter a valid nickname";
  }
  else if (mode == "nameok")
  {
     
	console.log(888);
	 
	document.getElementById("messagenn").disabled = true;
    document.getElementById("nickname").disabled = true;
	 
	 
    document.getElementById("messagenn").style.display = "none"; 
    document.getElementById("nickname").style.display = "none";

	 
    document.getElementById("error").textContent = "";
    document.getElementById("mainrect").style.fill = "orange";
 

    document.getElementById("toprow").style.display = "block";
    document.getElementById("gametext").style.display = "block";
    document.getElementById("pintext").style.display = "block"; 
    document.getElementById("questiontext").style.display = "block";
    document.getElementById("bottomrow").style.display = "block";
    document.getElementById("playertext").style.display = "block";
    document.getElementById("scoretext").style.display = "block";

    document.getElementById("scoretext").textContent = score;
    document.getElementById("playertext").textContent = player;	

    document.getElementById("gametext").textContent = game;
    document.getElementById("pintext").textContent = "PIN: " + pin;

    var text1 = question_num + " of " + numquestions;
    document.getElementById("questiontext").textContent = text1;

    document.getElementById("wait").textContent = "Waiting for host to start the game...";  
    	   
  }
  else if (mode == "waitcd")
  {  
    // Display "wait for question" countdown

	console.log('wait cd');
	 

    question_atimep = 5;
    document.getElementById("atimep").textContent = question_atimep;

    var text1 = question_num + " of " + numquestions;
    document.getElementById("questiontext").textContent = text1;
	

    // Don't display answer buttons
    document.getElementById("answer-red").style.display = "none";
    document.getElementById("answer-blue").style.display = "none";
    document.getElementById("answer-orange").style.display = "none";
    document.getElementById("answer-green").style.display = "none";
	
	document.getElementById("answer-red").disabled = true;
	document.getElementById("answer-blue").disabled = true;
	document.getElementById("answer-orange").disabled = true;
	document.getElementById("answer-green").disabled = true;	

  
    document.getElementById("wait").style.display = "none";

    document.getElementById("mainrect").style.fill = "beige";
  
    document.getElementById("aprequestr").style.display = "block"; // Display
    document.getElementById("aprequest").style.display = "block";
	document.getElementById("atimepc").style.display = "block";
    document.getElementById("atimep").style.display = "block";

    var pquer = document.getElementById("aprequestr");
    pquer.setAttribute('x',0);
    pquer.setAttribute('y',window.innerHeight*(25/100));
    pquer.setAttribute('height',window.innerHeight*(70/100));

    var pque = document.getElementById("aprequest");
    pque.setAttribute('x',window.innerWidth/2);
    pque.setAttribute('y',window.innerHeight*((35)/100));

    document.getElementById("aprequest").textContent = "Question " + question_num;    
	
	
	timeintervalap = setInterval(update_atimep, 1000); // 1000ms = 1sec
	
  
  }
  else if (mode == "answer")
  {

    // Display answer

	console.log("answer");

    document.getElementById("wait").style.display = "none";

    document.getElementById("mainrect").style.fill = "silver";

    document.getElementById("aprequestr").style.display = "none";
    document.getElementById("aprequest").style.display = "none";
	document.getElementById("atimepc").style.display = "none";
    document.getElementById("atimep").style.display = "none";


    document.getElementById("answer-red").style.display = "block";
    document.getElementById("answer-blue").style.display = "block";
    document.getElementById("answer-orange").style.display = "block";
    document.getElementById("answer-green").style.display = "block";
	
	document.getElementById("answer-red").disabled = false;
	document.getElementById("answer-blue").disabled = false;
	document.getElementById("answer-orange").disabled = false;
	document.getElementById("answer-green").disabled = false;	
    question_num=question_num+1;
  }
  else if (mode == "wait4all")
  {
  
  	console.log("wait4all");
  
    document.getElementById("wait").style.display = "block";

  
    // Don't show answer buttons
    document.getElementById("answer-red").style.display = "none";
    document.getElementById("answer-blue").style.display = "none";
    document.getElementById("answer-orange").style.display = "none";
    document.getElementById("answer-green").style.display = "none";
	
	document.getElementById("answer-red").disabled = true;
	document.getElementById("answer-blue").disabled = true;
	document.getElementById("answer-orange").disabled = true;
	document.getElementById("answer-green").disabled = true;	  
  
     // Players answered, now waiting for all players to answer  
     document.getElementById("mainrect").style.fill = "tan";
     document.getElementById("wait").style.display = "block";
     document.getElementById("wait").textContent = "Waiting for all other players to answer...";  


    // Don't display answer buttons
    document.getElementById("answer-red").style.display = "none";
    document.getElementById("answer-blue").style.display = "none";
    document.getElementById("answer-orange").style.display = "none";
    document.getElementById("answer-green").style.display = "none";
	
	document.getElementById("answer-red").disabled = true;
	document.getElementById("answer-blue").disabled = true;
	document.getElementById("answer-orange").disabled = true;
	document.getElementById("answer-green").disabled = true;	

  }
  else if (mode == "goodanswer")
  {
  
  	console.log("goodanswer");

    document.getElementById("wait").style.display = "block";
  
    // Don't show answer buttons
    document.getElementById("answer-red").style.display = "none";
    document.getElementById("answer-blue").style.display = "none";
    document.getElementById("answer-orange").style.display = "none";
    document.getElementById("answer-green").style.display = "none";
	
	document.getElementById("answer-red").disabled = true;
	document.getElementById("answer-blue").disabled = true;
	document.getElementById("answer-orange").disabled = true;
	document.getElementById("answer-green").disabled = true;	    
  
    document.getElementById("mainrect").style.fill = "lawngreen";
    document.getElementById("wait").style.display = "block";
    document.getElementById("wait").textContent = "CORRECT answer. keep up the good work!";  

    document.getElementById("scoretext").textContent = score;

  }
  else if (mode == "badanswer")
  {
  
    // Don't show answer buttons
	
	document.getElementById("wait").style.display = "block"; 
	
    console.log("badanswer");
	
    document.getElementById("answer-red").style.display = "none";
    document.getElementById("answer-blue").style.display = "none";
    document.getElementById("answer-orange").style.display = "none";
    document.getElementById("answer-green").style.display = "none";
	
	document.getElementById("answer-red").disabled = true;
	document.getElementById("answer-blue").disabled = true;
	document.getElementById("answer-orange").disabled = true;
	document.getElementById("answer-green").disabled = true;	    
  
    document.getElementById("mainrect").style.fill = "red";
    document.getElementById("wait").style.display = "block";
    document.getElementById("wait").textContent = "WRONG answer. Better luck next time!";  

    document.getElementById("scoretext").textContent = score;

  }
  else if (mode == "noanswer")
  {
  
    // Don't show answer buttons
	
    console.log("noanswer");
	
	document.getElementById("wait").style.display = "block";
	
    document.getElementById("answer-red").style.display = "none";
    document.getElementById("answer-blue").style.display = "none";
    document.getElementById("answer-orange").style.display = "none";
    document.getElementById("answer-green").style.display = "none";
	
	document.getElementById("answer-red").disabled = true;
	document.getElementById("answer-blue").disabled = true;
	document.getElementById("answer-orange").disabled = true;
	document.getElementById("answer-green").disabled = true;	    
  
    document.getElementById("mainrect").style.fill = "violet";
    document.getElementById("wait").style.display = "block";
    document.getElementById("wait").textContent = "You didn't answer on time. Don't be lazy!";  

    document.getElementById("scoretext").textContent = score;

  }




} // update_player




</script>
	  	  








    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <script
              src="http://code.jquery.com/jquery-3.2.1.min.js"
              integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
              crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='script_player.js') }}"></script>
</body>
</html>